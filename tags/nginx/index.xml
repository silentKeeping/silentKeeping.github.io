<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Nginx on FeixiangFu</title><link>https://fufeixiang.com/tags/nginx/</link><description>Recent content in Nginx on FeixiangFu</description><generator>Hugo -- gohugo.io</generator><language>zh-ch</language><copyright>© 2024 FeixiangFu</copyright><lastBuildDate>Sun, 24 Mar 2019 00:00:00 +0000</lastBuildDate><atom:link href="https://fufeixiang.com/tags/nginx/index.xml" rel="self" type="application/rss+xml"/><item><title>Nginx的proxy_redirect配置</title><link>https://fufeixiang.com/2019/03/nginx-proxy_redirect/</link><pubDate>Sun, 24 Mar 2019 00:00:00 +0000</pubDate><guid>https://fufeixiang.com/2019/03/nginx-proxy_redirect/</guid><description>前言 # 当nginx代理的后端服务器有301、302跳转时，需要注意指定proxy_set_header Host请求头部，会直接影响nginx反馈给客户端的URL请求，要结合实际需求调整proxy_set_header Host和proxy_redirect将被代理服务器设置在response header中的Location做转换。
搭建测试环境 # 1.测试架构规划
主机192.168.196.134 nginx虚拟主机www.test.com；监听端口31001；转发文根 /th；后端server 192.168.196.135:31009 nginx虚拟主机192.168.196.134；监听端口31000；转发文根 *.jsp；后端server 192.168.196.136:31005 主机192.168.196.135 nginx虚拟主机 192.168.196.135；监听端口31009；转发文根 /th/ft；后端server 192.168.196.134:31000 主机192.168.196.136 tomcat server; 监听端口31005 192.168.196.134:31001/th &amp;mdash;&amp;gt; 192.168.196.135:31009/th/ft &amp;ndash;&amp;gt; 192.168.196.134:31000 *.</description></item><item><title>nginx请求头X-Real-IP与X-Forwarded-For</title><link>https://fufeixiang.com/2019/03/nginx-real-ip/</link><pubDate>Tue, 19 Mar 2019 00:00:00 +0000</pubDate><guid>https://fufeixiang.com/2019/03/nginx-real-ip/</guid><description>前言 # nginx反向代理后端应用服务器时，遇到web应用服务器需要获取客户端真实IP，该如何正确配置nginx?本文分别在一级反向代理及两级反向代理情况下，测试请求头X-Real-IP与X-Forwarded-For如何配置
一级代理测试验证 # 1.测试架构: nginx反向代理 + tomcat web服务
ip server server port 192.168.196.135 nginx 31005 192.168.196.136 tomcat 31001 192.168.196.1 客户端 - 2.部署tomcat测试war包
$cat test.jsp &amp;lt;%@ page language=&amp;#34;java&amp;#34; contentType=&amp;#34;text/html; charset=ISO-8859-1&amp;#34; pageEncoding=&amp;#34;ISO-8859-1&amp;#34;%&amp;gt; &amp;lt;% out.</description></item><item><title>Nginx请求头proxy_set_header</title><link>https://fufeixiang.com/2019/03/nginx-proxy_set_header/</link><pubDate>Mon, 04 Mar 2019 00:00:00 +0000</pubDate><guid>https://fufeixiang.com/2019/03/nginx-proxy_set_header/</guid><description>前言 # nginx作为反向代理时，当满足location匹配条件后，向后端动态应用服务器发送请求，如果后端服务器会根据此次请求头做一些操作（比如通过Host或者server_name请求头的值进行校验等），就会出现问题。本文就用实例来分析一下nginx转发的请求头信息
环境准备 # IP SERVER 10.168.11.12 Nginx1.12 10.168.11.13 Tomcat7.0 一、准备tomcat war包
创建test.jsp文件来获取各请求头信息 &amp;lt;%@ page language=&amp;#34;java&amp;#34; contentType=&amp;#34;text/html; charset=ISO-8859-1&amp;#34; pageEncoding=&amp;#34;ISO-8859-1&amp;#34;%&amp;gt; &amp;lt;% out.println(&amp;#34;Protocol: &amp;#34; + request.getProtocol()); out.println(&amp;#34;Server Name: &amp;#34; + request.getServerName()); out.</description></item></channel></rss>