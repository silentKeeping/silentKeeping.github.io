<!doctype html><html lang=zh-ch dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="zh-ch"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><title>P2P文件与镜像分发开源解决方案Dragonfly安装部署 &#183; FeixiangFu</title>
<meta name=title content="P2P文件与镜像分发开源解决方案Dragonfly安装部署 &#183; FeixiangFu"><meta name=description content="打工人:tree:"><meta name=keywords content="Docker,"><link rel=canonical href=https://fufeixiang.com/2018/12/docker-dragonfly/><link type=text/css rel=stylesheet href=/css/main.bundle.min.2b8b793b5350f23c027e845b237b267c85c08a4a6128dfad2b43b25f354c42eb4629bb7f88b75e09b52056c28e0d057594a8185bd540bd7bece42b3be6399cdf.css integrity="sha512-K4t5O1NQ8jwCfoRbI3smfIXAikphKN+tK0OyXzVMQutGKbt/iLdeCbUgVsKODQV1lKgYW9VAvXvs5Cs75jmc3w=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.82867bf47a612d7462e3555f4fccb5ab28e2bd4b18c37131afdf5ba4d21396ab08ac679cae8e0ae71b26835b657ce022e7aafd352b1ecf7ce672512e5cb25882.js integrity="sha512-goZ79HphLXRi41VfT8y1qyjivUsYw3Exr99bpNITlqsIrGecro4K5xsmg1tlfOAi56r9NSsez3zmclEuXLJYgg==" data-copy data-copied></script><script src=/js/zoom.min.js></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="P2P文件与镜像分发开源解决方案Dragonfly安装部署"><meta property="og:description" content="前言 
    
    
    
        #
            
    


随着公司容器管理平台部署的系统越来越多，所纳管集群主机也越来越多，面对大规模的文件和镜像分发，由于单一文件服务器、镜像仓库实例会受到部署主机的网络带宽限制，导致分发耗时长、成功率低的问题。利用P2P技术搭建文件和镜像的分发系统，文件和镜像可在集群主机之间共享传输，可有效解决上述问题。
"><meta property="og:type" content="article"><meta property="og:url" content="https://fufeixiang.com/2018/12/docker-dragonfly/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-12-09T00:00:00+00:00"><meta property="article:modified_time" content="2018-12-09T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="P2P文件与镜像分发开源解决方案Dragonfly安装部署"><meta name=twitter:description content="前言 
    
    
    
        #
            
    


随着公司容器管理平台部署的系统越来越多，所纳管集群主机也越来越多，面对大规模的文件和镜像分发，由于单一文件服务器、镜像仓库实例会受到部署主机的网络带宽限制，导致分发耗时长、成功率低的问题。利用P2P技术搭建文件和镜像的分发系统，文件和镜像可在集群主机之间共享传输，可有效解决上述问题。
"><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"博客","name":"P2P文件与镜像分发开源解决方案Dragonfly安装部署","headline":"P2P文件与镜像分发开源解决方案Dragonfly安装部署","abstract":"\u003ch4 class=\u0022relative group\u0022\u003e前言 \n    \u003cdiv id=\u0022前言\u0022 class=\u0022anchor\u0022\u003e\u003c\/div\u003e\n    \n    \u003cspan\n        class=\u0022absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\u0022\u003e\n        \u003ca class=\u0022group-hover:text-primary-300 dark:group-hover:text-neutral-700\u0022\n            style=\u0022text-decoration-line: none !important;\u0022 href=\u0022#%e5%89%8d%e8%a8%80\u0022 aria-label=\u0022锚点\u0022\u003e#\u003c\/a\u003e\n    \u003c\/span\u003e        \n    \n\u003c\/h4\u003e\n\u003cblockquote\u003e\n\u003cp\u003e随着公司容器管理平台部署的系统越来越多，所纳管集群主机也越来越多，面对大规模的文件和镜像分发，由于单一文件服务器、镜像仓库实例会受到部署主机的网络带宽限制，导致分发耗时长、成功率低的问题。利用P2P技术搭建文件和镜像的分发系统，文件和镜像可在集群主机之间共享传输，可有效解决上述问题。\u003c\/p\u003e\n\u003c\/blockquote\u003e","inLanguage":"zh-ch","url":"https:\/\/fufeixiang.com\/2018\/12\/docker-dragonfly\/","author":{"@type":"Person","name":"FeixiangFu"},"copyrightYear":"2018","dateCreated":"2018-12-09T00:00:00\u002b00:00","datePublished":"2018-12-09T00:00:00\u002b00:00","dateModified":"2018-12-09T00:00:00\u002b00:00","keywords":["Docker"],"mainEntityOfPage":"true","wordCount":"859"}]</script><meta name=author content="FeixiangFu"><link href=https://github.com/silentKeeping/silentkeeping.github.io/tree/gh-pages rel=me><link href=/me rel=me><script src=/lib/jquery/jquery.slim.min.js integrity></script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?5ef66fe2eeef8523666aa97206334f5d",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><meta name=theme-color></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span></a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 pl-[24px] pr-[24px]" style=z-index:100><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div><div class="relative max-w-[64rem] ml-auto mr-auto"><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3"><div><a href=/ class=flex><span class=sr-only>FeixiangFu</span>
<img src=/img/avatar-logo_hu2551ff66a3dea2bebaba020a8603e044_243346_288x0_resize_box_3.png width=144 height=144 class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom" alt=FeixiangFu></a></div><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">FeixiangFu</a></nav><nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12"><a href=/posts/ class="flex items-center"><p class="text-base font-medium text-gray-500 hover:text-gray-900" title=博客>博客</p></a><a href=https://github.com/silentKeeping/silentkeeping.github.io/tree/gh-pages target=_blank class="flex items-center"><span><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span><p class="text-base font-medium text-gray-500 hover:text-gray-900" title></p></a><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400 h-12" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="ltr:mr-14 rtl:ml-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"><button id=appearance-switcher aria-label="Dark mode switcher" type=button><div class="flex items-center justify-center h-12 dark:hidden"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden h-12 dark:flex"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav><div class="flex md:hidden items-center space-x-5 md:ml-12"><span></span>
<button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button>
<button id=appearance-switcher-mobile aria-label="Dark mode switcher" type=button style=margin-right:5px><div class="flex items-center justify-center h-12 dark:hidden"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden h-12 dark:flex"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div><div class="-my-2 -mr-2 md:hidden"><label id=menu-button for=menu-controller class=block><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=/posts/ class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title=博客>博客</p></a></li><li class=mt-1><a href=https://github.com/silentKeeping/silentkeeping.github.io/tree/gh-pages target=_blank class="flex items-center"><div><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></div><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title></p></a></li></ul></div></label></div></div><script>(function(){var e=$(".main-menu"),t=window.location.pathname;e.find('a[href="'+t+'"]').each(function(e,t){$(t).children("p").addClass("active")})})()</script></div></div><script>window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n=document.getElementById("menu-blur");n.style.opacity=t/300})</script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><div id=hero class="h-[150px] md:h-[200px]"></div><div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom" style=background-image:url(/img/ocean_hu3d03a01dcc18bc5be0e67db3d8d209a6_5097493_1200x0_resize_q75_box.jpg)><div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal"></div><div class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal"></div></div><div id=background-blur class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div><script>window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n=document.getElementById("background-blur");n.style.opacity=t/300})</script><header id=single_header class="mt-5 max-w-prose"><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/>Welcome to feixiang's blog :tada:</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/>博客</a><span class="px-1 text-primary-500">/</span></li><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/2018/12/docker-dragonfly/>P2P文件与镜像分发开源解决方案Dragonfly安装部署</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">P2P文件与镜像分发开源解决方案Dragonfly安装部署</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div style=cursor:default class="flex flex-row flex-wrap items-center"><time datetime="2018-12-09 00:00:00 +0000 UTC">9 December 2018</time><span class="px-2 text-primary-500">&#183;</span><span>859 字</span><span class="px-2 text-primary-500">&#183;</span><span title=预计阅读>5 分钟</span></div><div style=cursor:pointer class="flex flex-row flex-wrap items-center"></div><div style=cursor:pointer class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='window.open("/t/docker/","_self")'><span class=flex><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Docker</span></span></span></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first sm:max-w-prose lg:ml-auto px-0 lg:order-last lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]"><details open class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden"></summary><div class="min-w-[220px] py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#前言>前言</a></li><li><a href=#dragonfly简介>Dragonfly简介</a></li><li><a href=#dragonfly镜像分发系统的搭建>Dragonfly镜像分发系统的搭建</a></li></ul></li></ul></li></ul></nav></div></details><details class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden"></summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#前言>前言</a></li><li><a href=#dragonfly简介>Dragonfly简介</a></li><li><a href=#dragonfly镜像分发系统的搭建>Dragonfly镜像分发系统的搭建</a></li></ul></li></ul></li></ul></nav></div></details><script>(function(){var t,e=$("#TableOfContents");if(e.length>0){t=$(window);function n(){var s,o=t.scrollTop(),i=$(".anchor"),n="";if(i.each(function(e,t){t=$(t),t.offset().top-$(window).height()/3<=o&&(n=t.attr("id"))}),s=e.find("a.active"),s.length==1&&s.eq(0).attr("href")=="#"+n)return!0;s.each(function(e,t){$(t).removeClass("active")}),e.find('a[href="#'+n+'"]').addClass("active"),e.find('a[href="#'+n+'"]').parentsUntil("#TableOfContents").each(function(e,t){$(t).children("a").parents("ul").show()})}t.on("scroll",n),$(document).ready(function(){n()})}})()</script></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="max-w-prose mb-20"><h4 class="relative group">前言<div id=前言 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%89%8d%e8%a8%80 aria-label=锚点>#</a></span></h4><blockquote><p>随着公司容器管理平台部署的系统越来越多，所纳管集群主机也越来越多，面对大规模的文件和镜像分发，由于单一文件服务器、镜像仓库实例会受到部署主机的网络带宽限制，导致分发耗时长、成功率低的问题。利用P2P技术搭建文件和镜像的分发系统，文件和镜像可在集群主机之间共享传输，可有效解决上述问题。</p></blockquote><h4 class="relative group">Dragonfly简介<div id=dragonfly简介 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#dragonfly%e7%ae%80%e4%bb%8b aria-label=锚点>#</a></span></h4><ol><li><p>阿里开源，托管在github上<a href=https://github.com/dragonflyoss/Dragonfly target=_blank>
https://github.com/dragonflyoss/Dragonfly</a></p></li><li><p>核心组件：
​ 1) cluster manger: 超级节点（supernode）集群
​ - 管理peer节点注册
​ - 负责CDN，从源文件服务器下载文件并生成数据块存储
​ - 调度peer节点在P2P网络中选择合适的下载源
​ 2) dfget proxy：
​ dfget是p2p客户端，部署在peer节点上，负责数据块的下载和共享。在镜像分发系统中也叫dfdaemon</p></li><li><p>Dragonfly镜像分发的工作模式:
​ 1) dfdaemon 拦截peer节点docker pull的HTTP请求，从镜像仓库服务器获取到镜像manifest文件后，使用dfget向supernode集群请求下载镜像的各layer文件
​ 2) supernode从镜像仓库6下载镜像layer文件并生成数据块
​ 3) peer节点通过dfget下载数据块，下载完成后supernode调度后续peer节点以P2P方式进行数据块下载
​ 4) 所有layer文件通过dfget下载完成后，docker进程根据manifests文件整合为本地镜像，并按照镜像规范保存各镜像layer</p><figure><img class="my-0 rounded-md" src="data:image/png;base64,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" alt=镜像分发模式></figure></li></ol><h4 class="relative group">Dragonfly镜像分发系统的搭建<div id=dragonfly镜像分发系统的搭建 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#dragonfly%e9%95%9c%e5%83%8f%e5%88%86%e5%8f%91%e7%b3%bb%e7%bb%9f%e7%9a%84%e6%90%ad%e5%bb%ba aria-label=锚点>#</a></span></h4><p>一、节点规划</p><table><thead><tr><th style=text-align:left>IP</th><th style=text-align:left>roles</th><th style=text-align:left>services</th></tr></thead><tbody><tr><td style=text-align:left>192.168.196.134</td><td style=text-align:left>supernode,registry,webserver</td><td style=text-align:left>docker,supernode,docker-distribution,nginx</td></tr><tr><td style=text-align:left>192.168.196.2</td><td style=text-align:left>supernode</td><td style=text-align:left>docker,supernode</td></tr><tr><td style=text-align:left>192.168.196.3</td><td style=text-align:left>peer</td><td style=text-align:left>docker</td></tr></tbody></table><p>二、下载源码
​ 最近一次release的版本0.2.0，在节点192.168.196.134上执行编译。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ mkdir /data/dragonfly
</span></span><span class=line><span class=cl>$ <span class=nb>cd</span> /data/dragonfly
</span></span><span class=line><span class=cl>$ wget https://github.com/dragonflyoss/Dragonfly/archive/v0.2.0.tar.gz  -O Dragonfly-0.2.0.tar.gz
</span></span><span class=line><span class=cl>$ tar xf Dragonfly-0.2.0.tar.gz
</span></span></code></pre></div><p>三、编译安装supernode</p><p>​ 3.1 编译环境准备</p><p>​ supernode.jar包编译依赖maven (<code>yum install maven</code>)，镜像定制依赖docker服务</p><p>​ 3.2 修改默认注册端口8001为<code>48001</code>及默认下载服务端口8002为<code>48002</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>$cd</span> /data/dragonfly/Dragonfly-0.2.0/src/supernode/src/main/java/com/alibaba/dragonfly/supernode/common
</span></span><span class=line><span class=cl>$ sed -i <span class=s1>&#39;s/8001/48001/&#39;</span> Constants.java
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ <span class=nb>cd</span> /data/dragonfly/Dragonfly-0.2.0/src/supernode/src/main/docker/source
</span></span><span class=line><span class=cl>$ cat nginx.conf
</span></span><span class=line><span class=cl>	......
</span></span><span class=line><span class=cl>    server <span class=o>{</span>
</span></span><span class=line><span class=cl>        listen              48001<span class=p>;</span>
</span></span><span class=line><span class=cl>        location / <span class=o>{</span>
</span></span><span class=line><span class=cl>            root /home/admin/supernode/repo<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    server <span class=o>{</span>
</span></span><span class=line><span class=cl>        listen              48002<span class=p>;</span>
</span></span><span class=line><span class=cl>        location /peer <span class=o>{</span>
</span></span><span class=line><span class=cl>            proxy_pass   http://127.0.0.1:8080<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl> 	......
</span></span></code></pre></div><p>​ 3.3 修改Dockerfile及配置文件</p><p>​ 本例中主机docker版本为1.13不支持多阶段定制，需要修改Dockerfile文件</p><p>​ 新建config.properties配置文件， 参考官方文档 <a href=https://d7y.io/user_guide/supernode_configuration/ target=_blank>https://d7y.io/user_guide/supernode_configuration/</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>cd</span> /data/dragonfly/Dragonfly-0.2.0/src/supernode/src/main/docker
</span></span><span class=line><span class=cl>$ cat Dockerfile
</span></span><span class=line><span class=cl><span class=c1>#私有centos7.2镜像(已配置阿里yum源)</span>
</span></span><span class=line><span class=cl>FROM 192.168.196.134:5000/library/centos7.2:01
</span></span><span class=line><span class=cl>COPY sources /tmp/sources
</span></span><span class=line><span class=cl>RUN yum install -y epel-release <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    yum install -y -q telnet nginx java-1.8.0-openjdk.x86_64 <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    cp /tmp/sources/start.sh /root/start.sh <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    cp /tmp/sources/nginx.conf /etc/nginx/nginx.conf <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    cp /tmp/sources/config.properties /root/config.properties <span class=o>&amp;&amp;</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    mkdir -p /home/admin/supernode/bin <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    cp /tmp/sources/start.sh /home/admin/supernode/bin/ <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    yum clean all <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    rm -rf /var/cache/yum /tmp/*  <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    <span class=nb>history</span> -c
</span></span><span class=line><span class=cl>ADD supernode.jar supernode.jar
</span></span><span class=line><span class=cl>EXPOSE <span class=m>48001</span> <span class=m>48002</span>
</span></span><span class=line><span class=cl>ENTRYPOINT <span class=o>[</span><span class=s2>&#34;/root/start.sh&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ cat source/config.properties 
</span></span><span class=line><span class=cl>supernode.cluster<span class=o>[</span>0<span class=o>]</span>.ip <span class=o>=</span> <span class=s1>&#39;192.168.196.134&#39;</span>
</span></span><span class=line><span class=cl>supernode.cluster<span class=o>[</span>0<span class=o>]</span>.registerPort <span class=o>=</span> <span class=m>48001</span>
</span></span><span class=line><span class=cl>supernode.cluster<span class=o>[</span>1<span class=o>]</span>.ip <span class=o>=</span> <span class=s1>&#39;192.168.196.2&#39;</span>
</span></span><span class=line><span class=cl>supernode.cluster<span class=o>[</span>1<span class=o>]</span>.registerPort <span class=o>=</span> <span class=m>48001</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ cat source/start.sh 
</span></span><span class=line><span class=cl><span class=c1>#!/usr/bin/env bash</span>
</span></span><span class=line><span class=cl>nginx
</span></span><span class=line><span class=cl>java -Dspring.config.location<span class=o>=</span>/root/config.properties -Djava.security.egd<span class=o>=</span>file:/dev/./urandom -jar supernode.jar
</span></span></code></pre></div><p>​ 3.4 编译supernode</p><p>​ 参考官方文档 <a href=https://d7y.io/user_guide/install_server/ target=_blank>https://d7y.io/user_guide/install_server/</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>cd</span> /data/dragonfly/Dragonfly-0.2.0
</span></span><span class=line><span class=cl>$ ./build/build.sh supernode
</span></span><span class=line><span class=cl>$ docker images supernode
</span></span><span class=line><span class=cl>REPOSITORY        TAG             IMAGE ID            CREATED             SIZE
</span></span><span class=line><span class=cl>supernode         0.2.0           aac72150e4a0        <span class=m>2</span> minutes ago       <span class=m>493</span> MB
</span></span></code></pre></div><p>​ 3.5 启动supernode服务</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ docker run -d -p 48001:48001 -p 48002:48002 supernode:0.2.0
</span></span><span class=line><span class=cl>394df40d13eded44f78e943b49bbd233bf19258f777c0c42586ae969db39f142
</span></span><span class=line><span class=cl>$ docker ps -l
</span></span><span class=line><span class=cl>CONTAINER ID   IMAGE            COMMAND          CREATED          STATUS              PORTS                                  NAMES
</span></span><span class=line><span class=cl>bafcf15d15ae   supernode:0.2.0  <span class=s2>&#34;/root/start.sh&#34;</span> <span class=m>30</span> seconds ago   Up <span class=m>26</span> seconds       0.0.0.0:48001-48002-&gt;48001-48002/tcp   stupefied_meninsky
</span></span><span class=line><span class=cl>$ telnet  localhost <span class=m>48001</span>
</span></span><span class=line><span class=cl>Trying ::1...
</span></span><span class=line><span class=cl>Connected to localhost.
</span></span><span class=line><span class=cl>Escape character is <span class=s1>&#39;^]&#39;</span>.
</span></span><span class=line><span class=cl>^<span class=o>]</span>
</span></span><span class=line><span class=cl>telnet&gt; quit
</span></span><span class=line><span class=cl>Connection closed.
</span></span><span class=line><span class=cl>$ telnet  localhost <span class=m>48002</span>
</span></span><span class=line><span class=cl>Trying ::1...
</span></span><span class=line><span class=cl>Connected to localhost.
</span></span><span class=line><span class=cl>Escape character is <span class=s1>&#39;^]&#39;</span>.
</span></span><span class=line><span class=cl>^<span class=o>]</span>
</span></span><span class=line><span class=cl>telnet&gt; quit
</span></span><span class=line><span class=cl>Connection closed.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 将supernode镜像推到私有仓库</span>
</span></span><span class=line><span class=cl>$ docker tag supernode:0.2.0 192.168.196.134:5000/library/supernode:0.2.0
</span></span><span class=line><span class=cl>$ docker push 192.168.196.134:5000
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 在192.168.196.2上pull镜像并启动supernode实例</span>
</span></span><span class=line><span class=cl>$ docker pull 192.168.196.134:5000/library/supernode:0.2.0
</span></span><span class=line><span class=cl>$ docker run -d --net host  192.168.196.134:5000/library/supernode:0.2.0
</span></span><span class=line><span class=cl>1c9bef1f4c14f4427291ecff793bef6665a617c71e10cb13c481d56763430b2d
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ ss -ntl
</span></span><span class=line><span class=cl>State    Recv-Q   Send-Q  Local Address:Port  Peer Address:Port              
</span></span><span class=line><span class=cl>LISTEN      <span class=m>0</span>      <span class=m>128</span>       *:22                  *:*                  
</span></span><span class=line><span class=cl>LISTEN      <span class=m>0</span>      <span class=m>128</span>       *:48001               *:*                  
</span></span><span class=line><span class=cl>LISTEN      <span class=m>0</span>      <span class=m>128</span>       *:48002               *:*                  
</span></span><span class=line><span class=cl>LISTEN      <span class=m>0</span>      <span class=m>100</span>       :::8080               :::*                  
</span></span><span class=line><span class=cl>LISTEN      <span class=m>0</span>      <span class=m>128</span>       :::22                 :::*
</span></span></code></pre></div><p>四、编译安装df-client</p><p>​ 4.1 编译环境准备</p><p>​ 依赖go环境，需要安装golint</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ yum install -y make go
</span></span><span class=line><span class=cl><span class=c1>#默认GOPATH</span>
</span></span><span class=line><span class=cl>$ <span class=nb>cd</span> /root/go/src
</span></span><span class=line><span class=cl><span class=c1>#GFW下的安装方法</span>
</span></span><span class=line><span class=cl>$ git clone https://github.com/golang/tools.git tools
</span></span><span class=line><span class=cl>$ git clone https://github.com/golang/lint.git
</span></span><span class=line><span class=cl>$ mkdir -p golang.org/x
</span></span><span class=line><span class=cl>$ cp github.com/golang/lint/ golang.org/x/ -a
</span></span><span class=line><span class=cl>$ go install /root/go/src/golang.org/x/lint/golint
</span></span><span class=line><span class=cl>$ cp /root/go/bin/golint /usr/local/sbin/
</span></span></code></pre></div><p>​ 4.2 修改dfget请求supernode下载端口8002为48002</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ cd/data/dragonfly/Dragonfly-0.2.0/src/getter
</span></span><span class=line><span class=cl>$ sed -i <span class=s1>&#39;s/8002/48002/&#39;</span> env.py
</span></span><span class=line><span class=cl>$ sed -i <span class=s1>&#39;s/8002/48002/&#39;</span> component/httputil.py
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#core/server.py中有关peer节点数据块存储时间的代码，默认180s</span>
</span></span><span class=line><span class=cl><span class=c1>#98                          expire_time = 180</span>
</span></span><span class=line><span class=cl><span class=c1>#135              alive_qu.get(True, 5 * 60.0)</span>
</span></span></code></pre></div><p>​ 4.3 编译df-client</p><p>​ 参考文档 <a href=https://d7y.io/user_guide/install_client/ target=_blank>https://d7y.io/user_guide/install_client/</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>cd</span> /data/dragonfly/Dragonfly-0.2.0/build/client
</span></span><span class=line><span class=cl>$ ./configure --prefix<span class=o>=</span>/data/dragonfly
</span></span><span class=line><span class=cl>$ make <span class=o>&amp;&amp;</span> make install
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 将编译好的df-client，打包传到192.168.196.3节点上</span>
</span></span><span class=line><span class=cl>$ <span class=nb>cd</span> /data/dragonfly
</span></span><span class=line><span class=cl>$ tar cf df-client.tar df-client/
</span></span><span class=line><span class=cl>$ scp df-client.tar 192.168.196.3:/data/
</span></span></code></pre></div><p>​ 4.4 在peer节点192.168.196.3安装df-client</p><p>​ 1) 新建/etc/dragonfly.conf配置文件，指定要注册的supernode集群</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ cat /etc/dragonfly.conf
</span></span><span class=line><span class=cl><span class=o>[</span>node<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>address</span><span class=o>=</span>192.168.196.2,192.168.196.134
</span></span></code></pre></div><p>​ 2) 修改docker daemon.json文件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 配置registry-mirrors</span>
</span></span><span class=line><span class=cl>$ cat /etc/docker/daemon.json 
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;insecure-registries&#34;</span>: <span class=o>[</span><span class=s2>&#34;0.0.0.0/0&#34;</span><span class=o>]</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;registry-mirrors&#34;</span>: <span class=o>[</span><span class=s2>&#34;http://127.0.0.1:65001&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>$ systemctl restart docker.service
</span></span></code></pre></div><p>​ 3) 启动dfdaemon</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>export</span> <span class=nv>PATH</span><span class=o>=</span>/data/df-client:<span class=nv>$PATH</span>
</span></span><span class=line><span class=cl>$ nohup dfdaemon --registry 192.168.196.134:5000 <span class=p>&amp;</span>
</span></span><span class=line><span class=cl>$ cat nohup.out 
</span></span><span class=line><span class=cl>launch dfdaemon on port:65001
</span></span><span class=line><span class=cl>$ ss -ntl       
</span></span><span class=line><span class=cl>State     Recv-Q Send-Q  Local Address:Port    Peer Address:Port              
</span></span><span class=line><span class=cl>LISTEN      <span class=m>0</span>      <span class=m>128</span>      *:22                   *:*                  
</span></span><span class=line><span class=cl>LISTEN      <span class=m>0</span>      <span class=m>128</span>     :::22                  :::*                  
</span></span><span class=line><span class=cl>LISTEN      <span class=m>0</span>      <span class=m>128</span>     :::65001               :::* 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ <span class=nb>cd</span> /root/.small-dragonfly/logs
</span></span><span class=line><span class=cl>$ cat dfdaemon.log
</span></span><span class=line><span class=cl><span class=nv>time</span><span class=o>=</span><span class=s2>&#34;2018-09-12 21:10:00&#34;</span> <span class=nv>level</span><span class=o>=</span>info <span class=nv>msg</span><span class=o>=</span>init...
</span></span><span class=line><span class=cl><span class=nv>time</span><span class=o>=</span><span class=s2>&#34;2018-09-12 21:10:00&#34;</span> <span class=nv>level</span><span class=o>=</span>info <span class=nv>msg</span><span class=o>=</span><span class=s2>&#34;dfget version:0.2.0\n&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>time</span><span class=o>=</span><span class=s2>&#34;2018-09-12 21:10:00&#34;</span> <span class=nv>level</span><span class=o>=</span>info <span class=nv>msg</span><span class=o>=</span><span class=s2>&#34;init finish&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>time</span><span class=o>=</span><span class=s2>&#34;2018-09-12 21:10:00&#34;</span> <span class=nv>level</span><span class=o>=</span>info <span class=nv>msg</span><span class=o>=</span><span class=s2>&#34;start dfdaemon param:&amp;{DfPath:/data/df-client/dfget DFRepo:/root/.small-dragonfly/dfdaemon/data/ RateLimit:20M CallSystem:com_ops_dragonfly URLFilter:Signature&amp;Expires&amp;OSSAccessKeyId Notbs:true MaxProcs:4 Version:false Verbose:false Help:false HostIP:127.0.0.1 Port:65001 Registry:192.168.196.134:5000 DownRule: CertFile: KeyFile:}&#34;</span>
</span></span></code></pre></div><p>五、镜像分发测试</p><p>​ 私有镜像仓库镜像：</p><p>​ 192.168.196.134:5000/library/supernode:0.2.0
​ 192.168.196.134:5000/testnasp/nginx:0.1</p><p>​ 在peer节点上 pull镜像：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ docker pull testnasp/nginx:0.1
</span></span><span class=line><span class=cl>Trying to pull repository docker.io/testnasp/nginx ... 
</span></span><span class=line><span class=cl>0.1: Pulling from docker.io/testnasp/nginx
</span></span><span class=line><span class=cl>ed070c36b93c: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>07e00549345e: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>c68fedf2fd94: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>Digest: sha256:2ff1929d16fb3df64564eeb91686bb07e585ed365ab3601e1fed164ff3dc4bc4
</span></span><span class=line><span class=cl>Status: Downloaded newer image <span class=k>for</span> docker.io/testnasp/nginx:0.1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ docker images
</span></span><span class=line><span class=cl>REPOSITORY                    TAG     IMAGE ID            CREATED           SIZE
</span></span><span class=line><span class=cl>docker.io/testnasp/nginx      0.1    cd5239a0906a        <span class=m>6</span> months ago      <span class=m>109</span> MB
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># pull镜像时可以查看dfget日志</span>
</span></span><span class=line><span class=cl>$ <span class=nb>cd</span> /root/.small-dragonfly/logs
</span></span><span class=line><span class=cl>$ tailf dfdaemon.log
</span></span><span class=line><span class=cl><span class=nv>time</span><span class=o>=</span><span class=s2>&#34;2018-09-12 21:45:00&#34;</span> <span class=nv>level</span><span class=o>=</span>info <span class=nv>msg</span><span class=o>=</span><span class=s2>&#34;start download url:http://192.168.196.134:5000/v2/testnasp/nginx/blobs/sha256:07e00549345efcbf93e50fc43440a05315c3ed049c28b7e7b709c1515b6550e0 to f5da0b91-b417-4f90-8a66-7ab99c5f581b in repo&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>time</span><span class=o>=</span><span class=s2>&#34;2018-09-12 21:45:00&#34;</span> <span class=nv>level</span><span class=o>=</span>info <span class=nv>msg</span><span class=o>=</span><span class=s2>&#34;start download url:http://192.168.196.134:5000/v2/testnasp/nginx/blobs/sha256:ed070c36b93c24fc135fd9541fc687a8fb0664192a6c8e3397644e365944221a to 0afb237f-c0d1-4ee4-a8d0-ec43cfe69109 in repo&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>time</span><span class=o>=</span><span class=s2>&#34;2018-09-12 21:45:00&#34;</span> <span class=nv>level</span><span class=o>=</span>info <span class=nv>msg</span><span class=o>=</span><span class=s2>&#34;dfget url:http://192.168.196.134:5000/v2/testnasp/nginx/blobs/sha256:07e00549345efcbf93e50fc43440a05315c3ed049c28b7e7b709c1515b6550e0 [SUCCESS] cost:20s&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>time</span><span class=o>=</span><span class=s2>&#34;2018-09-12 21:45:00&#34;</span> <span class=nv>level</span><span class=o>=</span>info <span class=nv>msg</span><span class=o>=</span><span class=s2>&#34;dfget url:http://192.168.196.134:5000/v2/testnasp/nginx/blobs/sha256:ed070c36b93c24fc135fd9541fc687a8fb0664192a6c8e3397644e365944221a [SUCCESS] cost:22s&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ cat dfclient.log 
</span></span><span class=line><span class=cl><span class=o>[</span>2018-09-12 21:45:45,160<span class=o>]</span> INFO sign:1719-1544622329.923 lineno:51 : cmd params:Namespace<span class=o>(</span><span class=nv>callsystem</span><span class=o>=</span><span class=s1>&#39;com_ops_dragonfly&#39;</span>, <span class=nv>console</span><span class=o>=</span>False, <span class=nv>dfdaemon</span><span class=o>=</span>True, <span class=nv>filter</span><span class=o>=</span><span class=s1>&#39;Signature&amp;Expires&amp;OSSAccessKeyId&#39;</span>, <span class=nv>header</span><span class=o>=[</span><span class=s1>&#39;User-Agent:docker/1.13.1 go/go1.8.3 kernel/3.10.0-693.el7.x86_64 os/linux arch/amd64 UpstreamClient(Docker-Client/1.13.1 \\(linux\\))&#39;</span>, <span class=s1>&#39;Accept-Encoding:identity&#39;</span>, <span class=s1>&#39;X-Forwarded-For:127.0.0.1&#39;</span><span class=o>]</span>, <span class=nv>identifier</span><span class=o>=</span>None, <span class=nv>locallimit</span><span class=o>=</span><span class=s1>&#39;20M&#39;</span>, <span class=nv>md5</span><span class=o>=</span>None, <span class=nv>node</span><span class=o>=</span>None, <span class=nv>notbs</span><span class=o>=</span>True, <span class=nv>output</span><span class=o>=</span><span class=s1>&#39;/root/.small-dragonfly/dfdaemon/data/f5da0b91-b417-4f90-8a66-7ab99c5f581b&#39;</span>, <span class=nv>pattern</span><span class=o>=</span>None, <span class=nv>showbar</span><span class=o>=</span>False, <span class=nv>timeout</span><span class=o>=</span>None, <span class=nv>totallimit</span><span class=o>=</span><span class=s1>&#39;20M&#39;</span>, <span class=nv>url</span><span class=o>=</span><span class=s1>&#39;http://192.168.196.134:5000/v2/testnasp/nginx/blobs/sha256:07e00549345efcbf93e50fc43440a05315c3ed049c28b7e7b709c1515b6550e0&#39;</span>, <span class=nv>version</span><span class=o>=</span>False<span class=o>)</span>,python version:sys.version_info<span class=o>(</span><span class=nv>major</span><span class=o>=</span>2, <span class=nv>minor</span><span class=o>=</span>7, <span class=nv>micro</span><span class=o>=</span>5, <span class=nv>releaselevel</span><span class=o>=</span><span class=s1>&#39;final&#39;</span>, <span class=nv>serial</span><span class=o>=</span>0<span class=o>)</span>
</span></span><span class=line><span class=cl>...中间省略...
</span></span><span class=line><span class=cl><span class=o>[</span>2018-09-12 21:45:50,965<span class=o>]</span> INFO sign:1720-1544622330.044 lineno:109 : move src:/root/.small-dragonfly/data/0afb237f-c0d1-4ee4-a8d0-ec43cfe69109-1720-1544622330.044 to dst:/root/.small-dragonfly/dfdaemon/data/0afb237f-c0d1-4ee4-a8d0-ec43cfe69109 result:True cost:0.057
</span></span><span class=line><span class=cl><span class=o>[</span>2018-09-12 21:45:50,965<span class=o>]</span> INFO sign:1720-1544622330.044 lineno:195 : download successfully from dragonfly
</span></span><span class=line><span class=cl><span class=o>[</span>2018-09-12 21:45:51,003<span class=o>]</span> INFO sign:1720-1544622330.044 lineno:60 : <span class=nb>local</span> http result:success <span class=k>for</span> path:/client/ and cost:0.002
</span></span><span class=line><span class=cl><span class=o>[</span>2018-09-12 21:45:51,003<span class=o>]</span> INFO sign:1720-1544622330.044 lineno:94 : <span class=p>|</span>7773d958cc784318c36095a405f4aa918d0c7ca45f7cad12c3e08c68fbca68fb<span class=p>|</span>http://192.168.196.134:5000/v2/testnasp/nginx/blobs/sha256:ed070c36b93c24fc135fd9541fc687a8fb0664192a6c8e3397644e365944221a<span class=p>|</span>22496029<span class=p>|</span>22496059<span class=p>|</span>192.168.196.134<span class=p>|</span>com_ops_dragonfly<span class=p>|</span>20.957<span class=p>|</span>
</span></span><span class=line><span class=cl><span class=o>[</span>2018-09-12 21:45:51,003<span class=o>]</span> INFO sign:1720-1544622330.044 lineno:111 : download SUCCESS cost:20.959s length:22496029 reason:0
</span></span></code></pre></div><blockquote><p>Tips：</p><p>要分发的镜像命名空间是library时，要注意peer节点pull下的镜像名字</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ docker pull library/supernode:0.2.0
</span></span><span class=line><span class=cl>Trying to pull repository docker.io/library/supernode ... 
</span></span><span class=line><span class=cl>0.2.0: Pulling from docker.io/library/supernode
</span></span><span class=line><span class=cl>89ac44988659: Already exists 
</span></span><span class=line><span class=cl>58f1be4f44ca: Already exists 
</span></span><span class=line><span class=cl>8de7fe9b2274: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>adfad6e78041: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>802d3ffa4c82: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>Digest: sha256:4b49d1655f518be7fa5b450df887a54519a57a462ca289ea21ab3d9e54fc846c
</span></span><span class=line><span class=cl>Status: Downloaded newer image <span class=k>for</span> docker.io/supernode:0.2.0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ docker images
</span></span><span class=line><span class=cl>REPOSITORY            TAG          IMAGE ID            CREATED             SIZE
</span></span><span class=line><span class=cl>docker.io/supernode   0.2.0       aac72150e4a0        <span class=m>5</span> days ago          <span class=m>493</span> MB
</span></span></code></pre></div><p>dfdaemon也可以容器化部署，使用host模式运行即可。还有要注意,目前一个dfdaemon只能指定一个仓库地址。</p></div></div><script>var oid="views_posts/Dragonfly安装部署.md",oid_likes="likes_posts/Dragonfly安装部署.md"</script><script type=text/javascript src=/js/page.min.5b1bad196a6075a1e11bae1dc95f24f67b610948a00525e347566c5a62338ea78f1c7224ab9a53873dcdb2a1a7d7d391b8a8ef45561297f68806c01315b0c4f6.js integrity="sha512-WxutGWpgdaHhG64dyV8k9nthCUigBSXjR1ZsWmIzjqePHHIkq5pThz3NsqGn19ORuKjvRVYSl/aIBsATFbDE9g=="></script></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group mr-3" href=/2018/08/k8s-deploy/><span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Kubernetes集群部署</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2018-08-09 00:00:00 +0000 UTC">9 August 2018</time>
</span></span></a></span><span><a class="flex text-right group ml-3" href=/2019/03/nginx-proxy_redirect/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Nginx的proxy_redirect配置</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2019-03-04 00:00:00 +0000 UTC">4 March 2019</time>
</span></span><span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span></a></span></div></div></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label title>&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex flex-col list-none sm:flex-row"><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tags/ title=Tags>标签</a></li></ul></nav><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2023
FeixiangFu</p><p class="text-xs text-neutral-500 dark:text-neutral-400">由 <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://blowfish.page/ target=_blank rel="noopener noreferrer">Blowfish</a> 强力驱动</p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.62060bb247f4de2b6dde45903668fefb68d792f365587605177b1227c0cf43588701edaca0cb40e2c8e2789bd5ce67c1d2a215b9fb258c3496a7cd25e7cb5fdf.js integrity="sha512-YgYLskf03itt3kWQNmj++2jXkvNlWHYFF3sSJ8DPQ1iHAe2soMtA4sjieJvVzmfB0qIVufsljDSWp80l58tf3w=="></script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://fufeixiang.com/ style=z-index:500><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title>
<span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>