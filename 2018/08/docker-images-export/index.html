<!doctype html><html lang=zh-ch dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="zh-ch"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><title>批量export Docker镜像脚本 &#183; FeixiangFu</title>
<meta name=title content="批量export Docker镜像脚本 &#183; FeixiangFu"><meta name=description content="打工人:tree:"><meta name=keywords content="Docker,"><link rel=canonical href=https://fufeixiang.com/2018/08/docker-images-export/><link type=text/css rel=stylesheet href=/css/main.bundle.min.2b8b793b5350f23c027e845b237b267c85c08a4a6128dfad2b43b25f354c42eb4629bb7f88b75e09b52056c28e0d057594a8185bd540bd7bece42b3be6399cdf.css integrity="sha512-K4t5O1NQ8jwCfoRbI3smfIXAikphKN+tK0OyXzVMQutGKbt/iLdeCbUgVsKODQV1lKgYW9VAvXvs5Cs75jmc3w=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.82867bf47a612d7462e3555f4fccb5ab28e2bd4b18c37131afdf5ba4d21396ab08ac679cae8e0ae71b26835b657ce022e7aafd352b1ecf7ce672512e5cb25882.js integrity="sha512-goZ79HphLXRi41VfT8y1qyjivUsYw3Exr99bpNITlqsIrGecro4K5xsmg1tlfOAi56r9NSsez3zmclEuXLJYgg==" data-copy data-copied></script><script src=/js/zoom.min.js></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta name=baidu-site-verification content="codeva-B70JXRUzHS"><meta property="og:title" content="批量export Docker镜像脚本"><meta property="og:description" content="背景 # 公司容器管理平台需要周期性对weblogic镜像进行打补丁升级操作，由于docker的分层管理机制，weblogic镜像体积会越来越大，影响后续的维护部署。我就写了一个批量export镜像并推送至镜像仓库的脚本，来精简镜像大小
脚本运行示例 # 脚本执行步骤 # 准备镜像列表文件
$ cat images_list.txt <-- 需要export的镜像 registry:8088/nginx:latest registry:8088/kubernetes-dashboard-amd64:v1.5.0 #export之前镜像仓库中的镜像tag $ curl registry:8088/v2/nginx/tags/list {&#34;name&#34;:&#34;nginx&#34;,&#34;tags&#34;:[&#34;latest&#34;]} $ curl registry:8088/v2/kubernetes-dashboard-amd64/tags/list {&#34;name&#34;:&#34;kubernetes-dashboard-amd64&#34;,&#34;tags&#34;:[&#34;v1.5.0&#34;]} 运行脚本
$ sh export-images.sh -h ------------------------------------------------------------------------- Usage: export_images."><meta property="og:type" content="article"><meta property="og:url" content="https://fufeixiang.com/2018/08/docker-images-export/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-08-07T00:00:00+00:00"><meta property="article:modified_time" content="2018-08-07T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="批量export Docker镜像脚本"><meta name=twitter:description content="背景 # 公司容器管理平台需要周期性对weblogic镜像进行打补丁升级操作，由于docker的分层管理机制，weblogic镜像体积会越来越大，影响后续的维护部署。我就写了一个批量export镜像并推送至镜像仓库的脚本，来精简镜像大小
脚本运行示例 # 脚本执行步骤 # 准备镜像列表文件
$ cat images_list.txt <-- 需要export的镜像 registry:8088/nginx:latest registry:8088/kubernetes-dashboard-amd64:v1.5.0 #export之前镜像仓库中的镜像tag $ curl registry:8088/v2/nginx/tags/list {&#34;name&#34;:&#34;nginx&#34;,&#34;tags&#34;:[&#34;latest&#34;]} $ curl registry:8088/v2/kubernetes-dashboard-amd64/tags/list {&#34;name&#34;:&#34;kubernetes-dashboard-amd64&#34;,&#34;tags&#34;:[&#34;v1.5.0&#34;]} 运行脚本
$ sh export-images.sh -h ------------------------------------------------------------------------- Usage: export_images."><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"博客","name":"批量export Docker镜像脚本","headline":"批量export Docker镜像脚本","abstract":"背景 # 公司容器管理平台需要周期性对weblogic镜像进行打补丁升级操作，由于docker的分层管理机制，weblogic镜像体积会越来越大，影响后续的维护部署。我就写了一个批量export镜像并推送至镜像仓库的脚本，来精简镜像大小\n脚本运行示例 # 脚本执行步骤 # 准备镜像列表文件\n$ cat images_list.txt \u0026lt;-- 需要export的镜像 registry:8088\/nginx:latest registry:8088\/kubernetes-dashboard-amd64:v1.5.0 #export之前镜像仓库中的镜像tag $ curl registry:8088\/v2\/nginx\/tags\/list {\u0026#34;name\u0026#34;:\u0026#34;nginx\u0026#34;,\u0026#34;tags\u0026#34;:[\u0026#34;latest\u0026#34;]} $ curl registry:8088\/v2\/kubernetes-dashboard-amd64\/tags\/list {\u0026#34;name\u0026#34;:\u0026#34;kubernetes-dashboard-amd64\u0026#34;,\u0026#34;tags\u0026#34;:[\u0026#34;v1.5.0\u0026#34;]} 运行脚本\n$ sh export-images.sh -h ------------------------------------------------------------------------- Usage: export_images.","inLanguage":"zh-ch","url":"https:\/\/fufeixiang.com\/2018\/08\/docker-images-export\/","author":{"@type":"Person","name":"FeixiangFu"},"copyrightYear":"2018","dateCreated":"2018-08-07T00:00:00\u002b00:00","datePublished":"2018-08-07T00:00:00\u002b00:00","dateModified":"2018-08-07T00:00:00\u002b00:00","keywords":["Docker"],"mainEntityOfPage":"true","wordCount":"395"}]</script><meta name=author content="FeixiangFu"><link href=https://github.com/silentKeeping/silentkeeping.github.io/tree/gh-pages rel=me><link href=/me rel=me><script src=/lib/jquery/jquery.slim.min.js integrity></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-MYX6F2X0C9"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-MYX6F2X0C9")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?5ef66fe2eeef8523666aa97206334f5d",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><meta name=theme-color></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span></a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 pl-[24px] pr-[24px]" style=z-index:100><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div><div class="relative max-w-[64rem] ml-auto mr-auto"><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3"><div><a href=/ class=flex><span class=sr-only>FeixiangFu</span>
<img src=/img/avatar-logo_hu2551ff66a3dea2bebaba020a8603e044_243346_288x0_resize_box_3.png width=144 height=144 class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom" alt=FeixiangFu></a></div><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">FeixiangFu</a></nav><nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12"><a href=/posts/ class="flex items-center"><p class="text-base font-medium text-gray-500 hover:text-gray-900" title=博客>博客</p></a><a href=https://github.com/silentKeeping/silentkeeping.github.io/tree/gh-pages target=_blank class="flex items-center"><span><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span><p class="text-base font-medium text-gray-500 hover:text-gray-900" title></p></a><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400 h-12" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="ltr:mr-14 rtl:ml-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"><button id=appearance-switcher aria-label="Dark mode switcher" type=button><div class="flex items-center justify-center h-12 dark:hidden"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden h-12 dark:flex"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav><div class="flex md:hidden items-center space-x-5 md:ml-12"><span></span>
<button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button>
<button id=appearance-switcher-mobile aria-label="Dark mode switcher" type=button style=margin-right:5px><div class="flex items-center justify-center h-12 dark:hidden"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden h-12 dark:flex"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div><div class="-my-2 -mr-2 md:hidden"><label id=menu-button for=menu-controller class=block><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=/posts/ class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title=博客>博客</p></a></li><li class=mt-1><a href=https://github.com/silentKeeping/silentkeeping.github.io/tree/gh-pages target=_blank class="flex items-center"><div><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></div><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title></p></a></li></ul></div></label></div></div><script>(function(){var e=$(".main-menu"),t=window.location.pathname;e.find('a[href="'+t+'"]').each(function(e,t){$(t).children("p").addClass("active")})})()</script></div></div><script>window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n=document.getElementById("menu-blur");n.style.opacity=t/300})</script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><div id=hero class="h-[150px] md:h-[200px]"></div><div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom" style=background-image:url(/img/ocean_hu3d03a01dcc18bc5be0e67db3d8d209a6_5097493_1200x0_resize_q75_box.jpg)><div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal"></div><div class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal"></div></div><div id=background-blur class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div><script>window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n=document.getElementById("background-blur");n.style.opacity=t/300})</script><header id=single_header class="mt-5 max-w-prose"><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/>Welcome to feixiang's blog :tada:</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/>博客</a><span class="px-1 text-primary-500">/</span></li><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/2018/08/docker-images-export/>批量export Docker镜像脚本</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">批量export Docker镜像脚本</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div style=cursor:default class="flex flex-row flex-wrap items-center"><time datetime="2018-08-07 00:00:00 +0000 UTC">7 August 2018</time><span class="px-2 text-primary-500">&#183;</span><span>395 字</span><span class="px-2 text-primary-500">&#183;</span><span title=预计阅读>2 分钟</span></div><div style=cursor:pointer class="flex flex-row flex-wrap items-center"></div><div style=cursor:pointer class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/docker/","_self")'><span class=flex><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Docker</span></span></span></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first sm:max-w-prose lg:ml-auto px-0 lg:order-last lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]"><details open class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden"></summary><div class="min-w-[220px] py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#背景>背景</a></li><li><a href=#脚本运行示例>脚本运行示例</a></li><li><a href=#脚本执行步骤>脚本执行步骤</a></li><li><a href=#shell脚本>shell脚本</a></li></ul></li></ul></li></ul></nav></div></details><details class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden"></summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#背景>背景</a></li><li><a href=#脚本运行示例>脚本运行示例</a></li><li><a href=#脚本执行步骤>脚本执行步骤</a></li><li><a href=#shell脚本>shell脚本</a></li></ul></li></ul></li></ul></nav></div></details><script>(function(){var t,e=$("#TableOfContents");if(e.length>0){t=$(window);function n(){var s,o=t.scrollTop(),i=$(".anchor"),n="";if(i.each(function(e,t){t=$(t),t.offset().top-$(window).height()/3<=o&&(n=t.attr("id"))}),s=e.find("a.active"),s.length==1&&s.eq(0).attr("href")=="#"+n)return!0;s.each(function(e,t){$(t).removeClass("active")}),e.find('a[href="#'+n+'"]').addClass("active"),e.find('a[href="#'+n+'"]').parentsUntil("#TableOfContents").each(function(e,t){$(t).children("a").parents("ul").show()})}t.on("scroll",n),$(document).ready(function(){n()})}})()</script></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="max-w-prose mb-20"><h4 class="relative group">背景<div id=背景 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e8%83%8c%e6%99%af aria-label=锚点>#</a></span></h4><blockquote><p>公司容器管理平台需要周期性对weblogic镜像进行打补丁升级操作，由于docker的分层管理机制，weblogic镜像体积会越来越大，影响后续的维护部署。我就写了一个批量export镜像并推送至镜像仓库的脚本，来精简镜像大小</p></blockquote><h4 class="relative group">脚本运行示例<div id=脚本运行示例 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e8%84%9a%e6%9c%ac%e8%bf%90%e8%a1%8c%e7%a4%ba%e4%be%8b aria-label=锚点>#</a></span></h4><figure><img class="my-0 rounded-md" src="data:image/png;base64,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" alt=1533196232151></figure><h4 class="relative group">脚本执行步骤<div id=脚本执行步骤 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e8%84%9a%e6%9c%ac%e6%89%a7%e8%a1%8c%e6%ad%a5%e9%aa%a4 aria-label=锚点>#</a></span></h4><ol><li><p>准备镜像列表文件</p><pre tabindex=0><code>$ cat images_list.txt                                                 &lt;-- 需要export的镜像
registry:8088/nginx:latest
registry:8088/kubernetes-dashboard-amd64:v1.5.0

#export之前镜像仓库中的镜像tag
$ curl registry:8088/v2/nginx/tags/list
{&#34;name&#34;:&#34;nginx&#34;,&#34;tags&#34;:[&#34;latest&#34;]}
$ curl registry:8088/v2/kubernetes-dashboard-amd64/tags/list
{&#34;name&#34;:&#34;kubernetes-dashboard-amd64&#34;,&#34;tags&#34;:[&#34;v1.5.0&#34;]}
</code></pre></li><li><p>运行脚本</p><pre tabindex=0><code>$ sh export-images.sh -h
-------------------------------------------------------------------------
Usage:
        export_images.sh -f IMAGES_FILE -t IMAGE_TAG [-p THREAD_NUM] [-h]
Description:
        IMAGES_FILE: the list of images need to be exported
        IMAGE_TAG: the target tag of exported images
        THREAD_NUM: the target thread numbers
-------------------------------------------------------------------------

$ sh export-images.sh -f images_list.txt -t test -p 2
开始执行任务
registry:8088/kubernetes-dashboard-amd64:test pushed
registry:8088/nginx:test pushed
任务执行结束

#export之后镜像仓库中的镜像tag，增加了test
$ curl registry:8088/v2/nginx/tags/list                     
{&#34;name&#34;:&#34;nginx&#34;,&#34;tags&#34;:[&#34;latest&#34;,&#34;test&#34;]}
$ curl registry:8088/v2/kubernetes-dashboard-amd64/tags/list
{&#34;name&#34;:&#34;kubernetes-dashboard-amd64&#34;,&#34;tags&#34;:[&#34;v1.5.0&#34;,&#34;test&#34;]}
</code></pre></li><li><p>查看脚本运行日志</p><pre tabindex=0><code>$ cat export_images.log  
Trying to pull repository registry:8088/kubernetes-dashboard-amd64 ... 
v1.5.0: Pulling from registry:8088/kubernetes-dashboard-amd64
Digest: sha256:ddd3454819c089517b434a3ea42abf3c184fce9bf45704abf22513082d900eba
Status: Image is up to date for registry:8088/kubernetes-dashboard-amd64:v1.5.0
.....中间省略.....
Sending build context to Docker daemon 2.048 kB
Step 1/5 : FROM registry:8088/kubernetes-dashboard-amd64:tmp
 ---&gt; 17b601e3c483
.....中间省略.....
Successfully built 8712115d0f0b
Login Succeeded
The push refers to a repository [registry:8088/nginx]
.....中间省略.....
registry:8088/kubernetes-dashboard-amd64:test pushed
Untagged: registry:8088/kubernetes-dashboard-amd64:tmp
Untagged: registry:8088/kubernetes-dashboard-amd64:test
Untagged: registry:8088/kubernetes-dashboard-amd64@sha256:5c601d866b5a6b135fc6654417c4f8726661ce6903f00fc96ffe8127cdc272a0
.....中间省略.....
Deleted: sha256:cc940a53e84603ed3886909d8150f456fc93d25abf85d5ea07099d92e33640d9
.....后面省略.....
</code></pre></li></ol><h4 class="relative group">shell脚本<div id=shell脚本 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#shell%e8%84%9a%e6%9c%ac aria-label=锚点>#</a></span></h4><pre tabindex=0><code>$ cat export-images.sh 
#!/bin/bash
#Author:Feixiang Fu
#set -x

#指定镜像仓库的验证用户及密码
user_name=fufeixiang
passwd=123456

tty=$(tty)
usage(){
        echo &#34;--------------------------------------------------------------&#34;
        echo &#34;Usage:&#34;
        echo -e &#34;\texport_images.sh -f IMAGES_FILE -t IMAGE_TAG [-p THREAD_NUM] [-h]&#34;
        echo &#34;Description:&#34;
        echo -e &#34;\tIMAGES_FILE: the list of images need to be exported&#34;
        echo -e &#34;\tIMAGE_TAG: the target tag of exported images&#34;
        echo -e &#34;\tTHREAD_NUM: the target thread numbers&#34;
        echo &#34;--------------------------------------------------------------&#34;
        exit -1
}

function work(){
        i=$RANDOM
        docker pull $org_image
        #随机容器名称
        docker run -d --name container$i $org_image sh -c &#34;tail -f /etc/hosts&#34;
        docker export container$i &gt; container${i}.tar
        docker import container${i}.tar $image_name:tmp
        docker rm -f container$i
        rm -rf container${i}.tar
        mkdir build-$i
cat &lt;&lt;EOF  &gt; build-$i/Dockerfile
FROM $image_name:tmp
WORKDIR /app/bin
ENTRYPOINT [&#34;/usr/bin/dumb-init&#34;,&#34;--&#34;]
USER dcos
CMD [&#34;sh&#34;, &#34;/app/bin/startServer.sh&#34;]
EOF
        #export镜像之后，entrypoint/cmd等会丢失，需要重新定制
        docker build -t $image_name:$tag build-$i/
        docker login -u $user_name -p $passwd $image_addr
        if [ &#34;$?&#34; -eq 0 ];then
            docker push $image_name:$tag &amp;&amp; echo -e &#34;\e[32m${image_name}:${tag} pushed\e[0m&#34; |tee $tty
        else
            echo -e &#34;\e[31m账户${user_name}密码不匹配,${image_name}:${tag} push failed\e[0m&#34; |tee $tty
        fi
        #清理import的镜像及build的新镜像
       docker rmi $image_name:tmp $image_name:$tag
}

[ -z &#34;$*&#34; ] &amp;&amp; usage &amp;&amp; exit 1
while getopts &#39;f:t:p:h&#39; opt;do
        case $opt in
                f) IMAGES_FILE=&#34;$OPTARG&#34;;;
                t) tag=&#34;$OPTARG&#34;;;
                p) thread=&#34;$OPTARG&#34;;;
                h) usage;;
                ?) usage;;
        esac
done
echo &#34;开始执行任务&#34;
#支持多进程模式
mkfifo tmp.fifo
exec 6&lt;&gt; tmp.fifo
thread=${thread:-1}
for ((j=0;j&lt;$thread;j++));
do
    echo
done &gt;&amp;6
while read line || [ -n &#34;$line&#34; ];do
   org_image=${line%% *}
   image_name=${line%:*}
   #user_name=`echo $line|cut -d&#34; &#34; -f2`
   #passwd=${line##* } 
   image_addr=${line%%/*}
   read -u6 
   { 
    work &gt;&gt; export_images.log
    echo &gt;&amp;6
   } &amp; 
done &lt; $IMAGES_FILE 
wait
exec 6&gt;&amp;-
rm -rf tmp.fifo build-*/
echo &#34;任务执行结束&#34;
</code></pre></div><h2 class="mt-8 text-2xl font-extrabold mb-10">Related</h2><section class="w-full grid gap-4 sm:grid-cols-2 md:grid-cols-3"><a href=/2018/01/build-docker-image/ class=min-w-full><div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative backdrop-blur"><div class="px-6 py-4"><div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral" href=/2018/01/build-docker-image/>批量自动构建docker镜像的shell脚本</div><div class="text-sm text-neutral-500 dark:text-neutral-400"><div style=cursor:default class="flex flex-row flex-wrap items-center"><time datetime="2018-01-06 00:00:00 +0000 UTC">6 January 2018</time><span class="px-2 text-primary-500">&#183;</span><span>580 字</span><span class="px-2 text-primary-500">&#183;</span><span title=预计阅读>3 分钟</span></div><div style=cursor:pointer class="flex flex-row flex-wrap items-center"></div><div style=cursor:pointer class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/docker/","_self")'><span class=flex><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Docker
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/shell/","_self")'><span class=flex><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">shell</span></span></span></div></div></div><div class="px-6 pt-4 pb-2"></div></div></a><a href=/2018/05/docker-devicemapper/ class=min-w-full><div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative backdrop-blur"><div class="px-6 py-4"><div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral" href=/2018/05/docker-devicemapper/>Docker存储驱动direct-lvm的配置</div><div class="text-sm text-neutral-500 dark:text-neutral-400"><div style=cursor:default class="flex flex-row flex-wrap items-center"><time datetime="2018-05-08 00:00:00 +0000 UTC">8 May 2018</time><span class="px-2 text-primary-500">&#183;</span><span>518 字</span><span class="px-2 text-primary-500">&#183;</span><span title=预计阅读>3 分钟</span></div><div style=cursor:pointer class="flex flex-row flex-wrap items-center"></div><div style=cursor:pointer class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/docker/","_self")'><span class=flex><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Docker
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/direct-lvm/","_self")'><span class=flex><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">direct-lvm</span></span></span></div></div></div><div class="px-6 pt-4 pb-2"></div></div></a><a href=/2018/07/golang-json/ class=min-w-full><div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative backdrop-blur"><div class="px-6 py-4"><div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral" href=/2018/07/golang-json/>Golang自定义json解析类型的实现</div><div class="text-sm text-neutral-500 dark:text-neutral-400"><div style=cursor:default class="flex flex-row flex-wrap items-center"><time datetime="2018-07-23 00:00:00 +0000 UTC">23 July 2018</time><span class="px-2 text-primary-500">&#183;</span><span>174 字</span><span class="px-2 text-primary-500">&#183;</span><span title=预计阅读>1 分钟</span></div><div style=cursor:pointer class="flex flex-row flex-wrap items-center"></div><div style=cursor:pointer class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/go/","_self")'><span class=flex><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">go</span></span></span></div></div></div><div class="px-6 pt-4 pb-2"></div></div></a></section></div><script>var oid="views_posts/批量export Docker镜像脚本.md",oid_likes="likes_posts/批量export Docker镜像脚本.md"</script><script type=text/javascript src=/js/page.min.5b1bad196a6075a1e11bae1dc95f24f67b610948a00525e347566c5a62338ea78f1c7224ab9a53873dcdb2a1a7d7d391b8a8ef45561297f68806c01315b0c4f6.js integrity="sha512-WxutGWpgdaHhG64dyV8k9nthCUigBSXjR1ZsWmIzjqePHHIkq5pThz3NsqGn19ORuKjvRVYSl/aIBsATFbDE9g=="></script></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group mr-3" href=/2018/07/golang-json/><span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Golang自定义json解析类型的实现</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2018-07-23 00:00:00 +0000 UTC">23 July 2018</time>
</span></span></a></span><span><a class="flex text-right group ml-3" href=/2018/08/docker-tls/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Docker配置TLS安全认证</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2018-08-08 00:00:00 +0000 UTC">8 August 2018</time>
</span></span><span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span></a></span></div></div></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label title>&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex flex-col list-none sm:flex-row"><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tags/ title=Tags>标签</a></li></ul></nav><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2024
FeixiangFu</p><p class="text-xs text-neutral-500 dark:text-neutral-400">由 <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://blowfish.page/ target=_blank rel="noopener noreferrer">Blowfish</a> 强力驱动</p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.62060bb247f4de2b6dde45903668fefb68d792f365587605177b1227c0cf43588701edaca0cb40e2c8e2789bd5ce67c1d2a215b9fb258c3496a7cd25e7cb5fdf.js integrity="sha512-YgYLskf03itt3kWQNmj++2jXkvNlWHYFF3sSJ8DPQ1iHAe2soMtA4sjieJvVzmfB0qIVufsljDSWp80l58tf3w=="></script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://fufeixiang.com/ style=z-index:500><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title>
<span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>