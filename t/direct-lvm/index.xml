<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>direct-lvm on FeixiangFu</title><link>https://fufeixiang.com/t/direct-lvm/</link><description>Recent content in direct-lvm on FeixiangFu</description><generator>Hugo -- gohugo.io</generator><language>zh-ch</language><copyright>© 2023 FeixiangFu</copyright><lastBuildDate>Tue, 08 May 2018 00:00:00 +0000</lastBuildDate><atom:link href="https://fufeixiang.com/t/direct-lvm/index.xml" rel="self" type="application/rss+xml"/><item><title>Docker存储驱动direct-lvm的配置</title><link>https://fufeixiang.com/2018/05/docker-devicemapper/</link><pubDate>Tue, 08 May 2018 00:00:00 +0000</pubDate><guid>https://fufeixiang.com/2018/05/docker-devicemapper/</guid><description>devicemapper是Linux发行版RHEL下Docker Engine的默认存储驱动，它有两种配置模式: loop-lvm和direct-lvm
loop-lvm是默认模式，基于loop设备文件创建thin pool来存储docker镜像及容器数据，官方不推荐在生产环境中使用此模式 direct-lvm是直接使用块设备创建thin pool，在中等负载和高密度环境下会有更好的性能优势，也是官方推荐在生产环境中使用的模式 基础环境准备 # 操作系统: CentOS7.2
Docker Engine: docker-engine-1.13.1-1.el7.centos.x86_64
硬盘: /dev/sda,/dev/sdb
$ lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sda 8:0 0 200G 0 disk ├─sda1 8:1 0 500M 0 part /boot └─sda2 8:2 0 190G 0 part ├─centos-root 253:0 0 90G 0 lvm / └─centos-data 253:1 0 100G 0 lvm /data sdb 8:16 0 100G 0 disk sr0 11:0 1 603M 0 rom 划分逻辑卷 # 基于/dev/sdb制作逻辑卷组appvg, 并划分逻辑卷appvg-docker，用于挂载docker graph目录(/docker) $ pvcreate /dev/sdb Physical volume &amp;#34;/dev/sdb&amp;#34; successfully created $ vgcreate appvg /dev/sdb Volume group &amp;#34;appvg&amp;#34; successfully created #规划20G用于逻辑卷/dev/appvg/docker $ lvcreate -n docker -L 20G appvg Logical volume &amp;#34;docker&amp;#34; created.</description></item></channel></rss>